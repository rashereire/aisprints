{
  "info": {
    "name": "Post-Build MCQ Unauthenticated Integration Tests",
    "_postman_id": "mcq-unauth-placeholder-id",
    "description": "MCQ API unauthenticated scenarios (401 responses) run in isolation, without any login, to avoid cookie jar issues in Newman.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "MCQ - POST /api/mcqs - missing authentication returns 401",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/api/mcqs",
          "host": ["{{baseUrl}}"],
          "path": ["api", "mcqs"]
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"title\": \"Unauth Test MCQ\",\n  \"questionText\": \"What is 2 + 2?\",\n  \"choices\": [\n    { \"choiceText\": \"3\", \"isCorrect\": false, \"displayOrder\": 0 },\n    { \"choiceText\": \"4\", \"isCorrect\": true, \"displayOrder\": 1 }\n  ]\n}"
        }
      },
      "response": [],
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "// MCQ - POST /api/mcqs - missing authentication returns 401",
              "",
              "pm.test(\"MCQ - create - unauthenticated returns 401\", function () {",
              "  pm.response.to.have.status(401);",
              "});"
            ]
          }
        }
      ]
    },
    {
      "name": "MCQ - PUT /api/mcqs/[id] - missing authentication returns 401",
      "request": {
        "method": "PUT",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/api/mcqs/unauth-test-mcq-id-12345",
          "host": ["{{baseUrl}}"],
          "path": ["api", "mcqs", "unauth-test-mcq-id-12345"]
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"title\": \"Unauth Test Update\",\n  \"questionText\": \"Updated?\",\n  \"choices\": [\n    { \"choiceText\": \"A\", \"isCorrect\": true, \"displayOrder\": 0 },\n    { \"choiceText\": \"B\", \"isCorrect\": false, \"displayOrder\": 1 }\n  ]\n}"
        }
      },
      "response": [],
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "// MCQ - PUT /api/mcqs/[id] - missing authentication returns 401",
              "",
              "pm.test(\"MCQ - update - unauthenticated returns 401\", function () {",
              "  pm.response.to.have.status(401);",
              "});"
            ]
          }
        }
      ]
    },
    {
      "name": "MCQ - DELETE /api/mcqs/[id] - missing authentication returns 401",
      "request": {
        "method": "DELETE",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/mcqs/unauth-test-mcq-id-12345",
          "host": ["{{baseUrl}}"],
          "path": ["api", "mcqs", "unauth-test-mcq-id-12345"]
        }
      },
      "response": [],
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "// MCQ - DELETE /api/mcqs/[id] - missing authentication returns 401",
              "",
              "pm.test(\"MCQ - delete - unauthenticated returns 401\", function () {",
              "  pm.response.to.have.status(401);",
              "});"
            ]
          }
        }
      ]
    },
    {
      "name": "MCQ - POST /api/mcqs/[id]/attempt - missing authentication returns 401",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/api/mcqs/unauth-test-mcq-id-12345/attempt",
          "host": ["{{baseUrl}}"],
          "path": ["api", "mcqs", "unauth-test-mcq-id-12345", "attempt"]
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"selectedChoiceId\": \"unauth-test-choice-id-12345\"\n}"
        }
      },
      "response": [],
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "// MCQ - POST /api/mcqs/[id]/attempt - missing authentication returns 401",
              "",
              "pm.test(\"MCQ - attempt - unauthenticated returns 401\", function () {",
              "  pm.response.to.have.status(401);",
              "});"
            ]
          }
        }
      ]
    }
  ]
}

