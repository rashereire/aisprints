# SeleniumTesting.mdc
# Strong Guidance – Preferred Patterns

This document provides strong guidance for Selenium-based UI automation.
Rules are phrased as SHOULD / SHOULD NOT and represent preferred patterns for Cursor.

---

## Core Principles
- Tests SHOULD be deterministic and stable
- UI automation SHOULD validate user behavior, not business logic
- CI execution SHOULD be the primary mode

---

## Preferred Stack
- TypeScript + Jest
- Selenium WebDriver
- npm + Jenkins
- Page Object Model
- Jest HTML Reporter (or Allure if preferred)
- axe-core for accessibility

---

## Canonical Project Structure
```text
tests/ui/
 ├─ src/
 │   ├─ base          # Base test classes, driver factory
 │   ├─ pages         # Page Object Model classes
 │   └─ tests         # Test files
 ├─ config/           # Configuration files
 └─ reports/          # Test reports
```

---

## Driver Factory (Canonical)
```typescript
import { Builder, WebDriver } from 'selenium-webdriver';
import * as chrome from 'selenium-webdriver/chrome';

export class DriverFactory {
  static async create(browser: string): Promise<WebDriver> {
    if (browser === 'chrome') {
      return new Builder()
        .forBrowser('chrome')
        .setChromeOptions(new chrome.Options())
        .build();
    }
    if (browser === 'firefox') {
      return new Builder()
        .forBrowser('firefox')
        .build();
    }
    throw new Error(`Unsupported browser: ${browser}`);
  }
}
```

---

## Page Object Example
```typescript
import { WebDriver, By, until } from 'selenium-webdriver';
import { BasePage } from '../base/BasePage';

export class LoginPage extends BasePage {
  private readonly username = By.id('username');

  async enterUsername(value: string): Promise<void> {
    const element = await this.waitForElement(this.username);
    await element.sendKeys(value);
  }
}
```

---

## Locator Guidance
Preferred order:
1. data-testid
2. stable id
3. accessible attributes
4. CSS
5. XPath (last resort)

---

## Explicit Wait Example
```typescript
import { WebDriver, until, By } from 'selenium-webdriver';

const element = await driver.wait(
  until.elementLocated(By.id('username')),
  10000 // 10 seconds
);
```

---

## Accessibility (axe-core)
```typescript
import { AxeBuilder } from '@axe-core/webdriverjs';

const results = await new AxeBuilder(driver).analyze();
expect(results.violations).toHaveLength(0);
```

---

## Reporting (Jest HTML Reporter)
```typescript
// Configured in jest.config.ts
// Screenshots captured on test failure via Jest hooks
```

---

## Test Structure Example
```typescript
describe('Login Tests', () => {
  let driver: WebDriver;

  beforeAll(async () => {
    driver = await DriverFactory.create('chrome');
  });

  afterAll(async () => {
    await driver.quit();
  });

  test('should login with valid credentials', async () => {
    const loginPage = new LoginPage(driver);
    await loginPage.enterUsername('testuser');
    // ... test implementation
  });
});
```
---
